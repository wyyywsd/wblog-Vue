{"remainingRequest":"/Users/mac/work_space/vue/wblog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/work_space/vue/wblog/src/components/UserRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/work_space/vue/wblog/src/components/UserRegister.vue","mtime":1624863365059},{"path":"/Users/mac/work_space/vue/wblog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/work_space/vue/wblog/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/work_space/vue/wblog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/work_space/vue/wblog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwoKVnVlLmNvbXBvbmVudChNZXNzYWdlLm5hbWUsIE1lc3NhZ2UpOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHZhciBjaGVja1VzZXJOYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi55So5oi35ZCN5LiN6IO95Li656m6IikpOwogICAgICB9CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPCAyKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIueUqOaIt+WQjemVv+W6puS4jeiDveWwj+S6juS4pOS9jSIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfTsKICAgIHZhciB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeWvhueggSIpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPCA4KSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLlr4bnoIHplb/luqbkuI3og73lsI/kuo445L2NIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnJ1bGVGb3JtLmNoZWNrUGFzcyAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzIik7CiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICB2YXIgdmFsaWRhdGVQYXNzMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+35YaN5qyh6L6T5YWl5a+G56CBIikpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLnJ1bGVGb3JtLnBhc3MpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgcnVsZUZvcm06IHsKICAgICAgICB1c2VyX25hbWU6ICIiLAogICAgICAgIHBhc3M6ICIiLAogICAgICAgIGNoZWNrUGFzczogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICBjaGVja1Bhc3M6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzMiwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIHVzZXJfbmFtZTogW3sgdmFsaWRhdG9yOiBjaGVja1VzZXJOYW1lLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgIH0sCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgidXNlciIsIHsKICAgICAgcmVnaXN0ZXJEaWFsb2dWaXNpYmxlOiAicmVnaXN0ZXJEaWFsb2dWaXNpYmxlU3RhdGUiLAogICAgfSksCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKCJ1c2VyIiwgWyJzZXRBY3Rpb25SZWdpc3RlckRpYWxvZ1Zpc2libGVTdGF0ZSJdKSwKICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvL+aPkOS6pOaIkOWKn+WQjiDlgZrnmoTlpITnkIYg6L+Z6YeM5Lya6LCD55SoIOazqOWGjOeahGFwaQogICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgdXNlcl9uYW1lOiB0aGlzLnJ1bGVGb3JtLnVzZXJfbmFtZSwKICAgICAgICAgICAgcGFzc193b3JkOiB0aGlzLnJ1bGVGb3JtLnBhc3MsCiAgICAgICAgICB9OwogICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAuc2lnblVwKCIvc2lnbnVwIiwgcGFyYW1zKTsKICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgIC8v5Y+W5Yiw6L+U5Zue5YC85ZCO5Zyo6L+Z6YeM6L+b6KGM5Yik5patCiAgICAgICAgICAvL+WmguaenCBtZXNzYWdl55qE5YC85Li6IOKAneazqOWGjOaIkOWKn+KAnSDlsLHlhbPpl63lvLnnqpcgICDlgZrlkI7nu63nmoTlpITnkIYKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhLm1lc3NhZ2UgPT09ICLms6jlhozmiJDlip8iKTsKICAgICAgICAgIGlmIChyZXN1bHQuZGF0YS5tZXNzYWdlID09PSAi5rOo5YaM5oiQ5YqfIikgewogICAgICAgICAgICB0aGlzLnNldEFjdGlvblJlZ2lzdGVyRGlhbG9nVmlzaWJsZVN0YXRlKAogICAgICAgICAgICAgICF0aGlzLnJlZ2lzdGVyRGlhbG9nVmlzaWJsZQogICAgICAgICAgICApOwogICAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5kYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgTWVzc2FnZS53YXJuaW5nKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQuZGF0YS5tZXNzYWdlLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIC8v5aaC5p6cbWVzc2FnZeeahOWAvOS4jeaYr+KAnOazqOWGjOaIkOWKn+KAnSAg5bCx5LiN5YWz6Zet5by556qXICDot7Plh7rorablkYoKICAgICAgICAgIC8vYWxlcnQoInN1Ym1pdCEiKTsKCiAgICAgICAgICAvL+WkhOeQhue7k+adn+WQjiwg5YWz6Zet55m76ZmG5by556qXCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["UserRegister.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserRegister.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog\n    title=\"注册\"\n    :visible.sync=\"registerDialogVisible\"\n    width=\"30%\"\n    :modal-append-to-body=\"false\"\n    :show-close=\"false\"\n  >\n    <div class=\"login-form\">\n      <el-form\n        :model=\"ruleForm\"\n        status-icon\n        :rules=\"rules\"\n        ref=\"ruleForm\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"用户名\" prop=\"user_name\">\n          <el-input type=\"text\" v-model=\"ruleForm.user_name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"pass\">\n          <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"checkPass\">\n          <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\" show-password></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" size=\"small\">提交</el-button>\n          <el-button\n            @click=\"setActionRegisterDialogVisibleState(!registerDialogVisible)\"\n            size=\"small\"\n          >取 消</el-button>\n          <el-button @click=\"resetForm('ruleForm')\" size=\"small\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { Message } from \"element-ui\";\n\nVue.component(Message.name, Message);\nimport { mapState, mapActions } from \"vuex\";\nexport default {\n  data() {\n    var checkUserName = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"用户名不能为空\"));\n      }\n      setTimeout(() => {\n        if (value.length < 2) {\n          callback(new Error(\"用户名长度不能小于两位\"));\n        } else {\n          callback();\n        }\n      }, 1000);\n    };\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else if (value.length < 8) {\n        callback(new Error(\"密码长度不能小于8位\"));\n      } else {\n        if (this.ruleForm.checkPass !== \"\") {\n          this.$refs.ruleForm.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.ruleForm.pass) {\n        callback(new Error(\"两次输入密码不一致\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      ruleForm: {\n        user_name: \"\",\n        pass: \"\",\n        checkPass: \"\",\n      },\n      rules: {\n        pass: [{ validator: validatePass, trigger: \"blur\" }],\n        checkPass: [{ validator: validatePass2, trigger: \"blur\" }],\n        user_name: [{ validator: checkUserName, trigger: \"blur\" }],\n      },\n    };\n  },\n\n  computed: {\n    ...mapState(\"user\", {\n      registerDialogVisible: \"registerDialogVisibleState\",\n    }),\n  },\n  methods: {\n    ...mapActions(\"user\", [\"setActionRegisterDialogVisibleState\"]),\n    submitForm(formName) {\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          //提交成功后 做的处理 这里会调用 注册的api\n          let params = {\n            user_name: this.ruleForm.user_name,\n            pass_word: this.ruleForm.pass,\n          };\n          let result = await this.$http.signUp(\"/signup\", params);\n          //console.log(result);\n          //取到返回值后在这里进行判断\n          //如果 message的值为 ”注册成功” 就关闭弹窗   做后续的处理\n          console.log(result.data.message === \"注册成功\");\n          if (result.data.message === \"注册成功\") {\n            this.setActionRegisterDialogVisibleState(\n              !this.registerDialogVisible\n            );\n            Message.success({\n              message: result.data.message,\n            });\n          } else {\n            //console.log(result.data.message);\n            Message.warning({\n              message: result.data.message,\n            });\n          }\n          //如果message的值不是“注册成功”  就不关闭弹窗  跳出警告\n          //alert(\"submit!\");\n\n          //处理结束后, 关闭登陆弹窗\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.el-col\n  border-radius 4px\n  height 700px\n.bg-purple\n  height 100%\n.grid-content\n  border-radius 4px\n  min-height 36px\n.login-form\n  color yellow\n  margin-top -20px\n  width 80%\n</style>"]}]}