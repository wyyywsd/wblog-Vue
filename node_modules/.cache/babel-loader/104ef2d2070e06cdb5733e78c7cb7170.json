{"remainingRequest":"/Users/mac/work_space/vue/wblog/node_modules/babel-loader/lib/index.js!/Users/mac/work_space/vue/wblog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/work_space/vue/wblog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/work_space/vue/wblog/src/views/home/NewArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/work_space/vue/wblog/src/views/home/NewArticle.vue","mtime":1624617312591},{"path":"/Users/mac/work_space/vue/wblog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/work_space/vue/wblog/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/work_space/vue/wblog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/work_space/vue/wblog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWMvd29ya19zcGFjZS92dWUvd2Jsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvbWFjL3dvcmtfc3BhY2UvdnVlL3dibG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1BcnRpY2xlQ29udGVudDogewogICAgICAgIEFydGljbGVUaXRsZTogIiIsCiAgICAgICAgQXJ0aWNsZUNvbnRlbnQ6ICIiLAogICAgICAgIEFydGljbGVMYWJlbDogIiIKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgiYXJ0aWNsZXMiLCB7CiAgICBuZXdBcnRpY2xlRGlhbG9nVmlzaWJsZTogIm5ld0FydGljbGVEaWFsb2dWaXNpYmxlU3RhdGUiCiAgfSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucygiYXJ0aWNsZXMiLCBbInNldEFjdGlvbk5ld0FydGljbGVEaWFsb2dWaXNpYmxlU3RhdGUiXSkpLCB7fSwgewogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHBhcmFtcywgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgYXJ0aWNsZV90aXRsZTogX3RoaXMuZm9ybUFydGljbGVDb250ZW50LkFydGljbGVUaXRsZSwKICAgICAgICAgICAgICAgICAgYXJ0aWNsZV9jb250ZW50OiBfdGhpcy5mb3JtQXJ0aWNsZUNvbnRlbnQuQXJ0aWNsZUNvbnRlbnQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kaHR0cC5jcmVhdGVBcnRpY2xlKCIvY3JlYXRlX2FydGljbGUiLCBwYXJhbXMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBY3Rpb25OZXdBcnRpY2xlRGlhbG9nVmlzaWJsZVN0YXRlKGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKHZhbHVlLCByZW5kZXIpIHsvLyBjb25zb2xlLmxvZyh2YWx1ZSk7CiAgICAgIC8vY29uc29sZS5sb2cocmVuZGVyKTsKICAgIH0sCiAgICAvLyDnu5HlrppAaW1nQWRkIGV2ZW50CiAgICAkaW1nQWRkOiBmdW5jdGlvbiAkaW1nQWRkKHBvcywgJGZpbGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZm9ybWRhdGEsIHJlc3VsdCwgX3JlczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIOesrOS4gOatpS7lsIblm77niYfkuIrkvKDliLDmnI3liqHlmaguCiAgICAgICAgICAgICAgICBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCJpbWFnZSIsICRmaWxlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi4kcmVmcy5tZCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRodHRwLnVwTG9hZCgiL3VwbG9hZCIsIGZvcm1kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgICAgICAgICAgX3JlcyA9IHJlc3VsdC5kYXRhOyAvLyDnrKzkuozmraUu5bCG6L+U5Zue55qEdXJs5pu/5o2i5Yiw5paH5pys5Y6f5L2N572uW+WklumTvuWbvueJh+i9rOWtmOWksei0pShpbWctQW52NjNTUVItMTU2NDczNDc2MDI1NykoMCldIC0+IFvlpJbpk77lm77niYfovazlrZjlpLHotKUoaW1nLU9WWDd2WlM0LTE1NjQ3MzQ3NjAyNTkpKHVybCldCgogICAgICAgICAgICAgICAgX3RoaXMyLiRyZWZzLm1kLiRpbWcyVXJsKHBvcywgX3Jlcy51cmwpOyAvL3RoaXMuJGh0dHAudXBMb2FkKCcvdXBsb2FkJyxmb3JtZGF0YSwgdGhpcy4kdm0pCiAgICAgICAgICAgICAgICAvLyDnrKzkuozmraUu5bCG6L+U5Zue55qEdXJs5pu/5o2i5Yiw5paH5pys5Y6f5L2N572uIVsuLi5dKDApIC0+ICFbLi4uXSh1cmwpCgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiAkdm0g5oyH5Li6bWF2b25FZGl0b3Llrp7kvovvvIzlj6/ku6XpgJrov4flpoLkuIvkuKTnp43mlrnlvI/ojrflj5YKICAgICAgICAgICAgICAgICAqIDEuIOmAmui/h+W8leWFpeWvueixoeiOt+WPljogYGltcG9ydCB7bWF2b25FZGl0b3J9IGZyb20gLi4uYCDnrYnmlrnlvI/lvJXlhaXlkI7vvIxgJHZtYOS4umBtYXZvbkVkaXRvcmAKICAgICAgICAgICAgICAgICAqIDIuIOmAmui/hyRyZWZz6I635Y+WOiBodG1s5aOw5piOcmVmIDogYDxtYXZvbi1lZGl0b3IgcmVmPW1kID48L21hdm9uLWVkaXRvcj7vvIxgJHZtYOS4uiBgdGhpcy4kcmVmcy5tZGAKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgLy8kdm0uJGltZzJVcmwocG9zLCB1cmwpOwoKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["NewArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,SAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,kBAAA,EAAA;AACA,QAAA,YAAA,EAAA,EADA;AAEA,QAAA,cAAA,EAAA,EAFA;AAGA,QAAA,YAAA,EAAA;AAHA;AADA,KAAA;AAOA,GATA;AAUA,EAAA,QAAA,oBACA,QAAA,CAAA,UAAA,EAAA;AACA,IAAA,uBAAA,EAAA;AADA,GAAA,CADA,CAVA;AAeA,EAAA,OAAA,kCACA,UAAA,CAAA,UAAA,EAAA,CAAA,uCAAA,CAAA,CADA;AAEA,IAAA,UAFA,wBAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MADA,GACA;AACA,kBAAA,aAAA,EAAA,KAAA,CAAA,kBAAA,CAAA,YADA;AAEA,kBAAA,eAAA,EAAA,KAAA,CAAA,kBAAA,CAAA;AAFA,iBADA;AAAA;AAAA,uBAKA,KAAA,CAAA,KAAA,CAAA,aAAA,CAAA,iBAAA,EAAA,MAAA,CALA;;AAAA;AAKA,gBAAA,MALA;AAMA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA;;AACA,gBAAA,KAAA,CAAA,qCAAA,CAAA,KAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAVA;AAWA,IAAA,MAXA,kBAWA,KAXA,EAWA,MAXA,EAWA,CACA;AACA;AACA,KAdA;AAeA;AACA,IAAA,OAhBA,mBAgBA,GAhBA,EAgBA,KAhBA,EAgBA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA;AACA,gBAAA,QAFA,GAEA,IAAA,QAAA,EAFA;AAGA,gBAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AAJA;AAAA,uBAKA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,EAAA,QAAA,CALA;;AAAA;AAKA,gBAAA,MALA;AAMA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,gBAAA,IAPA,GAOA,MAAA,CAAA,IAPA,EAQA;;AACA,gBAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAAA,QAAA,CAAA,GAAA,EAAA,IAAA,CAAA,GAAA,EATA,CAcA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA;AAvCA;AAfA,CAAA","sourcesContent":["<template>\n  <el-dialog\n    title=\"写文章\"\n    :visible.sync=\"newArticleDialogVisible\"\n    width=\"80%\"\n    :modal-append-to-body=\"false\"\n    :show-close=\"false\"\n    top=\"50px\"\n  >\n    <div class=\"login-form\">\n      <el-form label-position=\"right\" label-width=\"50px\" :model=\"formArticleContent\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"formArticleContent.ArticleTitle\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"内容\">\n          <!-- markdown编辑器 -->\n          <mavon-editor\n            v-model=\"formArticleContent.ArticleContent\"\n            :ishljs=\"true\"\n            codeStyle=\"qtcreator_dark\"\n            :boxShadow=\"false\"\n            placeholder=\"请用markdown编写...\"\n            defaultOpen=\"edit\"\n            ref=\"md\"\n            @imgAdd=\"$imgAdd\"\n            @change=\"change\"\n          />\n        </el-form-item>\n        <el-form-item label=\"标签\">\n          <el-input v-model=\"formArticleContent.ArticleLabel\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm()\" size=\"small\">提交</el-button>\n          <el-button\n            @click=\"setActionNewArticleDialogVisibleState(!newArticleDialogVisible)\"\n            size=\"small\"\n          >取 消</el-button>\n          <el-button @click=\"resetForm('ruleForm')\" size=\"small\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nexport default {\n  data() {\n    return {\n      formArticleContent: {\n        ArticleTitle: \"\",\n        ArticleContent: \"\",\n        ArticleLabel: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapState(\"articles\", {\n      newArticleDialogVisible: \"newArticleDialogVisibleState\",\n    }),\n  },\n  methods: {\n    ...mapActions(\"articles\", [\"setActionNewArticleDialogVisibleState\"]),\n    async submitForm() {\n      let params = {\n        article_title: this.formArticleContent.ArticleTitle,\n        article_content: this.formArticleContent.ArticleContent,\n      };\n      let result = await this.$http.createArticle(\"/create_article\", params);\n      console.log(result);\n      this.setActionNewArticleDialogVisibleState(false);\n    },\n    change(value, render) {\n      // console.log(value);\n      //console.log(render);\n    },\n    // 绑定@imgAdd event\n    async $imgAdd(pos, $file) {\n      // 第一步.将图片上传到服务器.\n      let formdata = new FormData();\n      formdata.append(\"image\", $file);\n      console.log(this.$refs.md);\n      let result = await this.$http.upLoad(\"/upload\", formdata)\n      console.log(result)\n      let _res = result.data;\n      // 第二步.将返回的url替换到文本原位置[外链图片转存失败(img-Anv63SQR-1564734760257)(0)] -> [外链图片转存失败(img-OVX7vZS4-1564734760259)(url)]\n      this.$refs.md.$img2Url(pos, _res.url);\n   \n \n\n\n      //this.$http.upLoad('/upload',formdata, this.$vm)\n      // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n      /**\n       * $vm 指为mavonEditor实例，可以通过如下两种方式获取\n       * 1. 通过引入对象获取: `import {mavonEditor} from ...` 等方式引入后，`$vm`为`mavonEditor`\n       * 2. 通过$refs获取: html声明ref : `<mavon-editor ref=md ></mavon-editor>，`$vm`为 `this.$refs.md`\n       */\n      //$vm.$img2Url(pos, url);\n      \n    },\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped></style>"],"sourceRoot":"src/views/home"}]}